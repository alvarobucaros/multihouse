var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(e,a){e.form_title="Lista de temas recurrentes",e.form_btnNuevo="Nuevo registro",e.form_btnEdita="Edita",e.form_btnElimina="Elimina",e.form_btnAnula="Cerrar",e.form_btnActualiza="Actualizar",e.form_titModal="Actualiza lista de registros",e.form_Phbusca="Consulta",e.form_Activo90="INACTIVO",e.form_Activo91="ACTIVO",e.form_tema_id="ID",e.form_tema_agendaId="AGENDAID",e.form_tema_empresa="EMPRESA",e.form_tema_comite="COMITE",e.form_tema_titulo="TITULO",e.form_tema_detalle="DETALLE",e.form_tema_tipo="TIPO",e.form_tema_responsable="RESPONSABLE",e.form_tema_fechaAsigna="FECHA ASIGNA",e.form_tema_estado="ESTADO",e.form_Phtema_id="Digite id",e.form_Phtema_agendaId="Digite agendaid",e.form_Phtema_empresa="Digite empresa",e.form_Phtema_comite="Digite comite",e.form_Phtema_titulo="Digite titulo",e.form_Phtema_detalle="Digite detalle",e.form_Phtema_tipo="Digite tipo",e.form_Phtema_responsable="Digite responsable",e.form_Phtema_fechaAsigna="Digite fechaasigna",e.form_Phtema_estado="Digite estado",e.tema_empresa=1,e.tema_tipo="GRAL",e.tema_id=0,e.tema_agendaId=0,e.tema_estado="1";var t=new Date,o=t.getMonth()+1;function m(t){a.post("modulos/mod_mm_agendatemas.php?op=r",{op:"r",empresa:e.empresa}).success(function(a){alert(a),e.details=a})}fechaHoy=t.getFullYear()+"-"+o+"-"+t.getDate(),e.tema_fechaAsigna=fechaHoy,e.registro={},a.post("modulos/mod_mm_agendatemas.php?op=0",{op:"0"}).success(function(a){e.operators0=a}),e.empresa=$("#e").val(),m(e.empresa),alert(e.empresa),e.show_form=!0,e.formToggle=function(){$("#idForm").slideToggle(),e.tema_id=0,$("#idForm").css("display","none")},e.show_form=!0,e.formToggle=function(){$("#idForm").slideToggle(),e.formato.$setPristine(),e.registro=angular.copy(defaultForm)},e.registro=function(e){alert("inserta")},e.registro=function(t){alert("actualiza"),a.post("modulos/mod_mm_agendatemas.php?op=a",{op:"a",tema_id:tema_id,tema_agendaId:tema_agendaId,tema_empresa:tema_empresa,tema_comite:tema_comite,tema_titulo:tema_titulo,tema_detalle:tema_detalle,tema_tipo:tema_tipo,tema_responsable:tema_responsable,tema_fechaAsigna:tema_fechaAsigna,tema_estado:tema_estado}).success(function(a){e.show_form=!0,alert(a),!0===a&&m(e.empresa)})},e.registro={},e.editInfo=function(a){e.registro=a,$("#idForm").slideToggle(),registro.tema_estado,registro.tema_estado=!0},e.deleteInfo=function(t){confirm("Desea borrar el registro con nombre : "+t.tema_comite+" ?")&&a.post("modulos/mod_mm_agendatemas.php?op=b",{op:"b",tema_id:t.tema_id}).success(function(a){"Ok"===a&&(m(e.empresa),alert("Registro Borrado "))})},e.updateInfo=function(t){er="",""===$("#tema_id").val()&&(er+="falta id\n"),""===$("#tema_agendaId").val()&&(er+="falta agendaid\n"),""===$("#tema_empresa").val()&&(er+="falta empresa\n"),""===$("#tema_comite").val()&&(er+="falta comite\n"),""===$("#tema_titulo").val()&&(er+="falta titulo\n"),""===$("#tema_detalle").val()&&(er+="falta detalle\n"),""===$("#tema_tipo").val()&&(er+="falta tipo\n"),""===$("#tema_responsable").val()&&(er+="falta responsable\n"),""===$("#tema_fechaAsigna").val()&&(er+="falta fechaasigna\n"),""===$("#tema_estado").val()&&(er+="falta estado\n"),""==er?a.post("modulos/mod_mm_agendatemas.php?op=a",{op:"a",tema_id:t.tema_id,tema_agendaId:t.tema_agendaId,tema_empresa:t.tema_empresa,tema_comite:t.tema_comite,tema_titulo:t.tema_titulo,tema_detalle:t.tema_detalle,tema_tipo:t.tema_tipo,tema_responsable:t.tema_responsable,tema_fechaAsigna:t.tema_fechaAsigna,tema_estado:t.tema_estado}).success(function(a){"Ok"===a&&(m(e.empresa),alert("Registro Actualizado "),$("#idForm").slideToggle())}):alert(er)},e.clearInfo=function(e){console.log("empty"),$("#idForm").slideToggle()}}]);