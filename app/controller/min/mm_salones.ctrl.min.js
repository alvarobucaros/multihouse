var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(a,o){function e(e){o.post("modulos/mod_mm_salones.php?op=r",{op:"r",empresa:e}).success(function(o){a.details=o,a.configPages()})}a.form_title="Lista de salones",a.form_btnNuevo="Nuevo registro",a.form_btnEdita="Edita",a.form_btnElimina="Elimina",a.form_btnAnula="Cerrar",a.form_btnActualiza="Actualizar",a.form_titModal="Actualiza lista de registros",a.form_Phbusca="Consulta",a.form_Activo0="Si",a.form_Activo1="No",a.form_salon_id="ID\t\t\t",a.form_salon_empresa="EMPRESA",a.form_salon_nombre="NOMBRE",a.form_salon_ubicacion="UBICACION ",a.form_salon_capacidad="CAPACIDAD",a.form_salon_apoyovisual="APOYOS",a.form_salon_responsable="RESPONSABLE",a.form_salon_activo="ACTIVO",a.form_salon_observaciones="OBSERVACIONES",a.form_Phsalon_id="Digite id\t\t\t",a.form_Phsalon_empresa="Digite empresa",a.form_Phsalon_nombre="Digite nombre",a.form_Phsalon_ubicacion="Digite ubicacion ",a.form_Phsalon_capacidad="Digite capacidad",a.form_Phsalon_apoyovisual="Digite apoyos",a.form_Phsalon_responsable="Digite responsable",a.form_Phsalon_activo="Digite activo",a.form_Phsalon_observaciones="Digite observaciones",a.registro=[],a.empresa=$("#e").val(),a.currentPage=0,a.pageSize=10,a.pages=[],e(a.empresa),a.configPages=function(){a.pages.length=0;var o=a.currentPage-4,e=a.currentPage+5;o<1?(o=1,e=Math.ceil(a.details.length/a.pageSize)>10?10:Math.ceil(a.details.length/a.pageSize)):o>=Math.ceil(a.details.length/a.pageSize)-10&&(o=Math.ceil(a.details.length/a.pageSize)-10,e=Math.ceil(a.details.length/a.pageSize)),o<1&&(o=1);for(var s=o;s<=e;s++)a.pages.push({no:s});a.currentPage>=a.pages.length&&(a.currentPage=a.pages.length-1)},a.setPage=function(o){a.currentPage=o-1},a.show_form=!0,a.formToggle=function(){$("#idForm").slideToggle(),a.formato.$setPristine(),a.registro={},a.registro.salon_activo="A",a.registro.salon_empresa=a.empresa,a.registro.salon_id=0},a.registro=function(a){alert("inserta")},a.registro=function(s){alert("actualiza"),o.post("modulos/mod_mm_salones.php?op=a",{op:"a",salon_id:salon_id,salon_empresa:salon_empresa,salon_nombre:salon_nombre,salon_ubicacion:salon_ubicacion,salon_capacidad:salon_capacidad,salon_apoyovisual:salon_apoyovisual,salon_responsable:salon_responsable,salon_activo:salon_activo,salon_observaciones:salon_observaciones}).success(function(o){a.show_form=!0,alert(o),!0===o&&e(a.empresa)})},a.registro=[],a.editInfo=function(o){a.registro=o,$("#idForm").slideToggle()},a.deleteInfo=function(s){confirm("Desea borrar el registro con nombre : "+s.salon_nombre+" ?")&&o.post("modulos/mod_mm_salones.php?op=b",{op:"b",salon_id:s.salon_id}).success(function(o){"Ok"===o?(e(a.empresa),alert("Registro Borrado ")):alert("Sal√≥n "+s.salon_nombre+" "+o)})},a.updateInfo=function(s){er="",em=$("#e").val(),$("#salon_empresa").val(em),""===$("#salon_id").val()&&(er+="falta id\t\t\t\n"),""===$("#salon_empresa").val()&&(er+="falta empresa\n"),""===$("#salon_nombre").val()&&(er+="falta nombre\n"),""===$("#salon_ubicacion").val()&&(er+="falta ubicacion \n"),""===$("#salon_capacidad").val()&&(er+="falta capacidad\n"),""===$("#salon_apoyovisual").val()&&(er+="falta apoyos\n"),""===$("#salon_responsable").val()&&(er+="falta responsable\n"),""===$("#salon_activo").val()&&(er+="falta activo\n"),""===$("#salon_observaciones").val()&&$("#salon_observaciones").val("No hay"),s.salon_empresa=em,$("#salon_empresa").val(em),""==er?o.post("modulos/mod_mm_salones.php?op=a",{op:"a",salon_id:s.salon_id,salon_empresa:s.salon_empresa,salon_nombre:s.salon_nombre,salon_ubicacion:s.salon_ubicacion,salon_capacidad:s.salon_capacidad,salon_apoyovisual:s.salon_apoyovisual,salon_responsable:s.salon_responsable,salon_activo:s.salon_activo,salon_observaciones:s.salon_observaciones}).success(function(o){"Ok"===o?(e(a.empresa),alert("Registro Actualizado "),$("#idForm").slideToggle()):alert(o)}):alert(er)},a.clearInfo=function(o){a.registro={},$("#idForm").slideToggle()}}]),app.filter("startFromGrid",function(){return function(a,o){return o=+o,a.slice(o)}});