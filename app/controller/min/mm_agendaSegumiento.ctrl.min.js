var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(e,t){var o;function a(o){empresa=e.empresa,t.post("modulos/mod_mm_agendamiento.php?op=tt",{op:"tt",agenda_id:o,empresa:empresa}).success(function(t){"NO HAY"==t?alert("No hay temas definidos"):e.detailTemas=t})}function r(o){empresa=e.empresa,t.post("modulos/mod_mm_agendamiento.php?op=ti",{op:"ti",agenda_id:o,empresa:empresa}).success(function(t){"NO HAY"==t?alert("No hay invitados a la reunión definidos"):e.detailAsistes=t})}e.form_title="Seguimiento de reunión (Desarrollo)",e.form_nuevaActa=" Crea acta ",e.form_titleTerc="Adiciona participanteCambios en el tercero",e.form_titleTercero="Modifica datos del invitado",e.form_titleaddTema="Modifica tema ",e.form_titleTema="Adiciona tema",e.form_btnNuevoInv="Nuevo invitado",e.form_btnNuevoTema="Nuevo tema",e.form_btnAdd="Adiciona registro",e.form_btnEdita="Edita registro",e.form_btnElimina="Elimina registro",e.form_btnAcepta="Acepta",e.form_asistente_nombre="Nombre",e.form_asistente_empresa="Empresa",e.form_asistente_cargo="Cargo",e.form_agenda_comiteId="COMITE",e.form_asistente_celuar="Celular",e.form_asistente_email="Correo",e.form_asistente_orden="Orden secuencial",e.form_asistente_celular="Nro Celular",e.form_asistente_email="Correo electrónico",e.form_btnActualiza="Actualiza",e.form_btnAnula="Cierra",e.form_asistente_asiste="Asiste ? ",e.form_asistente_causa="Motivo inasistencia :",e.form_asisteS="Si",e.form_asisteN="No",e.form_tituloP="Presidente",e.form_tituloS="Secretario",e.form_tituloT="Transcriptor",e.form_temasTratar="Temas a tratar",e.form_tituloN="Ninguno",e.form_asistente_titulo="Título",e.form_tema_titulo="Tema",e.form_tema_detalle="Detalle",e.form_tema_responsable="Responsable",e.form_tema_tipo="Tipo tema",e.form_tema_fechaAsigna="Fecha asignado",e.form_tema_fechaCumple="Fecha cumplido",e.form_temag="Tema general",e.form_temap="Tema pendiente",e.form_tema_desarrollo="Desarrollo",e.form_tema_estado="Activo ?",e.form_convocatoria="Fecha y hora  próxima reunión",e.vista=!1,e.registroTr={},e.detailAsiste={},e.registroTm={},e.registroTema={},e.registroTercero={},e.registroAddTema={},e.causal=!1,e.invisible=!1,e.addtemaTema=!1,e.responseDiv=!1,e.frmTercero1=!1,e.frmTemas=!1,e.Convocatoria=!1,e.comite_id=0,e.tema_id=0,e.agenda_id=0,e.empresa=$("#e").val(),e.hoy="",o=e.empresa,t.post("modulos/mod_mm_agendamiento.php?op=1",{op:"1",empresa:o}).success(function(t){e.operators1=t}),function(){hoy=new Date;var t=hoy.getMonth()+1;fechaHoy=hoy.getFullYear()+"-",t<10&&(fechaHoy+="0");fechaHoy+=t+"-",hoy.getDate()<10&&(fechaHoy+="0");fechaHoy+=hoy.getDate(),e.hoy=fechaHoy,e.responseDiv="false",e.tercForm="false"}(),e.focusfn=function(){e.focus=!0},e.blurfn=function(){e.focus=!1},e.focusfnTema=function(){e.focus=!0},e.blurfnTema=function(){e.focus=!1},e.updateComite=function(){t.post("modulos/mod_mm_agendamiento.php?op=dc",{op:"dc",comiteId:"comite_id"}).success(function(t){"NO HAY"==t?(alert("No hay seguimiento para esta reunión pues el comité no tiene agendamiento pendiente"),e.responseDiv=!1,e.frmTercero1=!1,e.frmTemas=!1,e.resultado=""):(res=t.split("||"),e.resultado=res[0],e.comite_id=res[1],e.agenda_id=res[1],e.responseDiv=!0,e.frmTercero1=!0,e.frmTemas=!0,a(res[1]),r(res[1]),e.vista=!0)})},e.cualMotivoS=function(){e.causal=!1},e.cualMotivoN=function(){e.causal=!0},e.createDetailAsiste=function(){e.form_titleTercero="Adiciona datos de participante ",t.post("modulos/mod_mm_agendamiento.php?op=sel",{op:"sel",agenda_id:e.comite_id,opc:"I"}).success(function(t){e.registroTr.asistente_orden=t}),e.tercForm="true"},e.editDetailAsiste=function(t){var o=t.invitado_titulo;e.form_titleTercero="Modifica datos del participante : "+t.invitado_nombre,e.registroTercero.asistente_nombre=t.invitado_nombre,e.registroTercero.asistente_cargo=t.invitado_cargo,e.registroTercero.asistente_empresa=t.invitado_empresa,e.registroTercero.asistente_asiste=t.invitado_asistio,e.registroTercero.asistente_titulo=o.substring(0,1),e.registroTercero.asistente_causa="",e.registroTercero.asistente_orden=t.invitado_orden,e.registroTercero.asistente_id=t.invitado_id,e.registroTercero.asistente_celular=t.invitado_celuar,e.registroTercero.asistente_email=t.invitado_email,e.terceroForm="true"},e.deleteDetailAsiste=function(o){if(confirm("Desea borrar el registro con nombre : "+o.invitado_nombre+" ?")){e.sgmnto_comiteId;t.post("modulos/mod_mm_agendamiento.php?op=dtl",{op:"dtl",invitado_id:o.invitado_id}).success(function(t){"Ok"===t&&(r(e.comite_id),alert("Registro Borrado "))})}},e.editDetailTema=function(t){datos=t.tema_id+"||"+t.tema_agendaId+"||"+t.tema_comite+"||"+t.tema_tipo,datos+=t.tema_titulo+"||"+t.tema_detalle+"||"+t.tema_desarrollo+"||"+t.tema_responsable+"||",datos+=t.tema_estado+"||"+t.tema_orden+"||"+t.tema_fechaAsigna+"||"+t.tema_fechaCumple,e.comite_id=t.tema_comite,e.tema_id=t.tema_id,e.agenda_id=t.tema_agendaId;var o=t.tema_tipo;e.form_titleaddTema="Modifica tema : "+t.tema_titulo,e.registroAddTema.tema_titulo=t.tema_titulo,e.registroAddTema.tema_detalle=t.tema_detalle,e.registroAddTema.tema_desarrollo=t.tema_desarrollo,e.registroAddTema.tema_responsable=t.tema_responsable,e.registroAddTema.tema_estado=t.tema_estado,e.registroAddTema.tema_orden=t.tema_orden,e.registroAddTema.tema_tipo=o.substring(0,1),e.registroAddTema.tema_fechaAsigna=t.tema_fechaAsigna,e.registroAddTema.tema_fechaCumple=t.tema_fechaCumple,"0000"==t.tema_fechaCumple.substr(0,4)&&(e.registroAddTema.tema_fechaCumple=e.hoy),e.registroAddTema.tema_id=t.tema_id,e.addtemaTema="true"},e.createDetailTema=function(){e.form_titleaddTema="Adiciona un nuevo tema",e.registroAddTema={},e.registroAddTema.tema_estado="A",e.registroAddTema.tema_tipo="G",e.registroAddTema.tema_id=0,t.post("modulos/mod_mm_agendamiento.php?op=sel",{op:"sel",agenda_id:e.comite_id,opc:"T"}).success(function(t){e.registroAddTema.tema_orden=t});var o=new Date,a=o.getMonth()+1,r=o.getDate();fechaHoy=o.getFullYear()+"-",a<10&&(fechaHoy+="0"),fechaHoy+=a+"-",r<10&&(fechaHoy+="0"),fechaHoy+=r,e.registroAddTema.tema_fechaAsigna=fechaHoy,e.registroAddTema.tema_fechaCumple=fechaHoy,$("#addtemaForm").show(),e.addtemaTema="true"},e.clearInfoTr=function(){e.tercForm="false",e.registroTr={}},e.clearInfoAddTema=function(){e.addtemaTema="false",e.registroTema={}},e.clearInfoTema=function(){e.temaTema="false",e.registroTema={}},e.clearInfoTercero=function(){e.terceroForm="false",e.registroTercero={}},e.updateInfoTr=function(o){celular="",email="",void 0!==e.registroTr.asistente_celuar&&(celular=e.registroTr.asistente_celuar),void 0!==e.registroTr.asistente_email&&(email=e.registroTr.asistente_email);var a=e.sgmnto_comiteId+"||"+e.registroTr.asistente_nombre+"||"+e.registroTr.asistente_empresa+"||"+e.registroTr.asistente_cargo+"||"+e.registroTr.orden+"||"+e.registroTr.titulo+"||"+celular+"||"+email+"||"+e.comite_id;t.post("modulos/mod_mm_agendamiento.php?op=atl",{op:"atl",datos:a}).success(function(t){"Ok"===t&&(r(e.comite_id),e.tercForm=!1,alert("Registro adcionado "))})},e.updateInfoTercero=function(o){var a=e.sgmnto_comiteId+"||"+e.registroTercero.asistente_nombre+"||"+e.registroTercero.asistente_cargo;a+="||"+e.registroTercero.asistente_empresa+"||"+e.registroTercero.asistente_asiste+"||",a+=e.registroTercero.asistente_titulo+"||"+e.registroTercero.asistente_causa+"||",a+=e.registroTercero.asistente_id+"||"+e.registroTercero.asistente_orden+"||"+e.comite_id+"||",a+=e.registroTercero.asistente_celular+"||"+e.registroTercero.asistente_email+"||"+e.registroTercero.asistente_id,t.post("modulos/mod_mm_agendamiento.php?op=ctl",{op:"ctl",datos:a}).success(function(t){"Ok"===t&&(r(e.comite_id),e.terceroForm=!1,alert("Registro actualizado "))})},e.updateInfoTema=function(o){var r=e.comite_id+"||"+e.sgmnto_comiteId+"||"+e.registroTema.tema_titulo+"||"+e.registroTema.tema_detalle+"||"+e.registroTema.tema_responsable+"||"+o.agenda_id;alert(r),t.post("modulos/mod_mm_agendamiento.php?op=atm",{op:"atm",datos:r}).success(function(t){"Ok"===t&&(a(e.comite_id),alert("tema creado "))})},e.updateInfoAddTema=function(o){var r=e.registroAddTema.tema_id+"||"+e.agenda_id+"||"+e.empresa+"||"+e.comite_id+"||"+e.registroAddTema.tema_titulo+"||"+e.registroAddTema.tema_detalle+"||"+e.registroAddTema.tema_tipo+"||"+e.registroAddTema.tema_responsable+"||"+e.registroAddTema.tema_fechaCumple+"||"+e.registroAddTema.tema_fechaAsigna+"||"+e.registroAddTema.tema_desarrollo+"||"+e.registroAddTema.tema_estado+"||"+e.agenda_id+"||"+e.registroAddTema.tema_orden;t.post("modulos/mod_mm_agendamiento.php?op=atm",{op:"atm",datos:r}).success(function(t){"Ok"===t&&(a(e.agenda_id),alert("tema modificado "),e.addtemaTema=!1)})},e.createActa=function(t){e.sgmnto_comiteId,e.comite_id,e.empresa;e.Convocatoria=!0},e.convocatoria=function(){empresa=e.empresa.trim();var o=e.sgmnto_comiteId+"||"+e.comite_id+"||"+empresa+"||"+e.registroTercero.convocatoria;t.post("modulos/mod_mm_agendamiento.php?op=conv",{op:"conv",datos:o}).success(function(t){res=t.split("||"),"Ok"===res[0]&&alert(res[1]),e.Convocatoria=!1})}}]);