var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(e,o){function a(o){if(empresa=$("#e").val(),function(){var e=!1;window.File&&window.FileReader&&window.FileList&&window.Blob&&(e=!0);return e}()){var a=null,r=o.target.files[0],n=new FileReader;n.readAsText(r),n.onload=function(o){var r=o.target.result;a=$.csv.toArrays(r);var n=$("#archivo").val(),t=$("#empresa").val();if(confirm("importa los datos a la tabla  desde el archivo "+n)){for(e.progress=!0,i=1;i<a.length;i++)condicion=t+"||"+n+"||"+a[i],$.post("inc/opcGrales.php",{accion:"importaDatos",condicion:condicion},function(e){});alert("Importó -"+i+"- filas. correcto !!!"),e.progress=!1}else alert("No importo registros!")}}else alert("Este browser no permite carga de archivos !");n.onerror=function(){alert("No puede leer  "+r.fileName)}}e.form_titleImportar="Importa inmuebles y propietarios desde XLS",e.nota1="La información debe estar en formato .CSV cada campo separado por un punto y coma (;) y en un solo documento",e.nota2="El formato debe ser: ",e.nota3="Codigo ; Descripcion ; Area ; Coeficiente ; Ubicacion en el conjunto ; Responsable de la cuenta ; Cedula ; Telefonos ; Direccion Física ; Correo electrónico",e.progress=!1,$("document").ready(function(){document.getElementById("fileUpload").addEventListener("change",a,!1)}),$("#nf").click(function(){return $("#popup").fadeIn("slow"),$(".popup-overlay").fadeIn("slow"),$(".popup-overlay").height($(window).height()),!1}),$("#close").click(function(){return $("#popup").fadeOut("slow"),$(".popup-overlay").fadeOut("slow"),inf=$("#tipoInfo").find(":selected").val(),$("#informe").val(inf),!1}),$(":file").change(function(){var e=this.files[0],o=e.name,a=e.size;e.type;$("#archivo").val(o),$("#tamano").val(a),empresa=$("#e").val(),$("#empresa").val(empresa)}),$("#fileUpload").click(function(){var e=$(this);$("#fileUpload").show().focus().click().hide();var o=$("#fileUpload").val();e.html(o)})}]);