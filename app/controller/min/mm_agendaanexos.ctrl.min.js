var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(o,e){function a(a,n){empresa=o.empresa,e.post("modulos/mod_mm_agendaanexos.php?op=r",{op:"r",empresa:empresa,comite:a,agenda:n}).success(function(e){o.details=e})}o.form_title="Documentos anexados al acta",o.form_btnNuevo="Nuevo registro",o.form_btnEdita="Edita",o.form_btnElimina="Elimina",o.form_btnAnula="Cerrar",o.form_btnActualiza="Actualizar",o.form_titModal="Actualiza lista de registros",o.form_Phbusca="Consulta",o.form_btnCarga="Cargarlo",o.form_anexos_id="ID",o.form_agenda_comiteId="COMITE",o.form_anexos_acta_id="ACTA",o.form_anexos_anexo="ANEXO",o.form_anexos_descripcion="DESCRIPCION",o.form_Phanexos_id="Digite id",o.form_Phanexos_comiteid="Digite comiteid",o.form_Phanexos_agendaid="Digite agendaid",o.form_Phanexos_anexo="Digite anexo",o.form_Phanexos_descripcion="Digite descripcion del anexo a cargar",o.form_btnRecarga="Recarga lista",o.CargaDocumento="Carga Documento",o.registro={},o.agendaId=0,o.comiteId=0,o.empresa=$("#e").val(),o.ruedita=!1,o.btnCarga=!0,o.btnReCarga=!1,o.registro.dibujo="C",empresa=o.empresa=$("#e").val(),e.post("modulos/mod_mm_agendaanexos.php?op=0",{op:"0",empresa:empresa}).success(function(e){o.operators0=e}),o.updateComite=function(){empresa=o.empresa=$("#e").val(),o.comiteId=o.registro.agenda_comiteId,o.registro.comiteId=o.comiteId,e.post("modulos/mod_mm_agendaanexos.php?op=1",{op:"1",comite:o.comiteId,empresa:empresa}).success(function(e){o.operators1=e})},o.comiteSeleccionado=function(){o.agendaId=o.registro.agenda_id,o.registro.actaId=o.agendaId,e.post("modulos/mod_mm_agendaanexos.php?op=fch",{op:"fch",agenda:o.agendaId}).success(function(e){o.registro.anno=e,a(o.comiteId,o.agendaId)})},o.botonOk=function(){o.btnCarga=!0,o.ruedita=!0},o.recarga=function(){a(o.comiteId,o.agendaId)},o.actualizaLista=function(){a(o.comiteId,o.agendaId),o.ruedita=!1,o.registro.anexos_descripcion="",$("#btnReCarga").hide()},o.leeDatosComite=function(e){o.comiteId=e.agenda_id,alert("leer datos de ".$scope.comiteId)},o.show_form=!0,o.formToggle=function(){$("#idForm").slideToggle(),o.anexos_id=0,$("#idForm").css("display","none")},o.show_form=!0,o.formToggle=function(){$("#idForm").slideToggle(),o.formato.$setPristine(),o.registro=angular.copy(defaultForm)},o.deleteInfo=function(n){confirm("Desea borrar el registro con nombre : "+n.anexos_anexo+" ?")&&(com=n.anexos_comiteid,ag=n.anexos_agendaid,e.post("modulos/mod_mm_agendaanexos.php?op=b",{op:"b",anexos_id:n.anexos_id}).success(function(e){"Ok"===e&&(a(o.comiteId,o.agendaId),alert("Registro Borrado "))}))}}]);