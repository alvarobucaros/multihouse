var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(e,a){e.form_title="Crea/Actualiza Empresa",e.form_btnNuevo="Nuevo registro",e.form_btnEdita="Edita",e.form_btnElimina="Elimina",e.form_btnAnula="Cerrar",e.form_btnActualiza="Actualizar",e.form_titModal="Actualiza lista de registros",e.form_Phbusca="Consulta",e.form_Activo80="E Mail",e.form_Activo81="Celular",e.form_Activo82="Usuario",e.form_Activo90="Español",e.form_Activo91="Inglés",e.form_Activo92="Otro",e.form_Activo180="Media Hora",e.form_Activo181="Una Hora",e.form_cresidencialS="Si",e.form_cresidencialN="No",e.form_empresa_id="ID",e.form_empresa_nombre="NOMBRE",e.form_empresa_nit="NIT",e.form_empresa_web="WEB",e.form_empresa_direccion="DIRECCION",e.form_empresa_telefonos="TELEFONOS",e.form_empresa_ciudad="CIUDAD",e.form_empresa_logo="LOGO",e.form_empresa_autentica="AUTENTICA",e.form_empresa_lenguaje="LENGUAJE",e.form_empresa_versionPrd="VERSION APP",e.form_empresa_versionBd="VERSION BD",e.form_empresa_clave="CLAVE",e.form_empresa_email="EMAIL",e.form_empresa_registrsoXpagina="REGISTRSO PAGINA",e.form_empresa_diasTrabaja="DIAS TRABAJA",e.form_empresa_horarioInicio="HORARIO INICIO",e.form_empresa_horarioTermina="HORARIO TERMINA",e.form_empresa_intervaloCalendario="INTERVALO CALENDARIO",e.form_empresa_FormatoActa="FORMATO ACTA",e.form_empresa_cresidencial="ES CONJUNTO RESIDENCIAL",e.form_empresa_ctrl="CELULAR USUARIO",e.form_Phempresa_id="Digite id",e.form_Phempresa_nombre="Digite nombre",e.form_Phempresa_nit="Digite nit",e.form_Phempresa_web="Digite web",e.form_Phempresa_direccion="Digite direccion",e.form_Phempresa_telefonos="Digite telefonos",e.form_Phempresa_ciudad="Digite ciudad",e.form_Phempresa_logo="Digite logo",e.form_Phempresa_autentica="Digite autentica",e.form_Phempresa_lenguaje="Digite lenguaje",e.form_Phempresa_versionPrd="Digite version app",e.form_Phempresa_versionBd="Digite version bd",e.form_Phempresa_clave="Digite clave",e.form_Phempresa_email="Digite email",e.form_Phempresa_registrsoXpagina="Digite registrso pagina",e.form_Phempresa_diasTrabaja="Digite dias trabaja",e.form_Phempresa_horarioInicio="Digite horario inicio",e.form_Phempresa_horarioTermina="Digite horario termina",e.form_Phempresa_intervaloCalendario="Digite intervalo calendario",e.form_Phempresa_FormatoActa="Digite formato acta",e.form_Phempresa_ctrl="Número de celular del administrador",e.registro=[],e.empresa=$("#e").val(),e.currentPage=0,e.pageSize=10,e.pages=[];var r={empresa_id:0,empresa_nombre:"",empresa_nit:"",empresa_web:"",empresa_direccion:"",empresa_telefonos:"",empresa_ciudad:"",empresa_logo:"logoEmpresa.png",empresa_autentica:"C",empresa_lenguaje:"ESP",empresa_versionPrd:"",empresa_versionBd:"",empresa_clave:"",empresa_email:"",empresa_registrsoXpagina:10,empresa_diasTrabaja:"L-M-M-J-V",empresa_horarioInicio:"7:00",empresa_horarioTermina:"18:00",empresa_intervaloCalendario:"M",empresa_FormatoActa:"Estandard",empresa_cresidencial:"N"};function o(){a.post("modulos/mod_mm_empresaNew.php?op=r",{op:"r"}).success(function(a){e.details=a,e.configPages(),console.log("empty"),$("#idForm").slideToggle()})}o(),$("#idForm").slideToggle(),e.configPages=function(){e.pages.length=0;var a=e.currentPage-4,r=e.currentPage+5;a<1?(a=1,r=Math.ceil(e.details.length/e.pageSize)>10?10:Math.ceil(e.details.length/e.pageSize)):a>=Math.ceil(e.details.length/e.pageSize)-10&&(a=Math.ceil(e.details.length/e.pageSize)-10,r=Math.ceil(e.details.length/e.pageSize)),a<1&&(a=1);for(var o=a;o<=r;o++)e.pages.push({no:o});e.currentPage>=e.pages.length&&(e.currentPage=e.pages.length-1)},e.setPage=function(a){e.currentPage=a-1},e.show_form=!0,e.show_form=!0,e.formToggle=function(){$("#idForm").slideToggle(),e.empresa_id=0,$("#idForm").css("display","none")},e.show_form=!0,e.formToggle=function(){$("#idForm").slideToggle(),e.formato.$setPristine(),e.registro=angular.copy(r)},e.registro=function(e){alert("inserta")},e.registro=function(r){alert("actualiza"),a.post("modulos/mod_mm_empresa.php?op=a",{op:"a",empresa_id:empresa_id,empresa_nombre:empresa_nombre,empresa_nit:empresa_nit,empresa_web:empresa_web,empresa_direccion:empresa_direccion,empresa_telefonos:empresa_telefonos,empresa_ciudad:empresa_ciudad,empresa_logo:empresa_logo,empresa_autentica:empresa_autentica,empresa_lenguaje:empresa_lenguaje,empresa_versionPrd:empresa_versionPrd,empresa_versionBd:empresa_versionBd,empresa_clave:empresa_clave,empresa_email:empresa_email,empresa_registrsoXpagina:empresa_registrsoXpagina,empresa_diasTrabaja:empresa_diasTrabaja,empresa_horarioInicio:empresa_horarioInicio,empresa_horarioTermina:empresa_horarioTermina,empresa_intervaloCalendario:empresa_intervaloCalendario,empresa_FormatoActa:empresa_FormatoActa,empresa_cresidencial:empresa_cresidencial}).success(function(a){e.show_form=!0,!0===a&&o()})},e.registro={},e.editInfo=function(a){e.registro=a,$("#idForm").slideToggle()},e.deleteInfo=function(e){confirm("Desea borrar el registro con nombre : "+e.empresa_nombre+" ?")&&a.post("modulos/mod_mm_empresa.php?op=b",{op:"b",empresa_id:e.empresa_id}).success(function(e){"Ok"===e&&(o(),alert("Registro Borrado "))})},e.updateInfo=function(e){er="",""===$("#empresa_id").val()&&(er+="falta id\n"),""===$("#empresa_nombre").val()&&(er+="falta nombre\n"),""===$("#empresa_nit").val()&&(er+="falta nit\n"),""===$("#empresa_web").val()&&(er+="falta web\n"),""===$("#empresa_direccion").val()&&(er+="falta direccion\n"),""===$("#empresa_telefonos").val()&&(er+="falta telefonos\n"),""===$("#empresa_ciudad").val()&&(er+="falta ciudad\n"),""===$("#empresa_logo").val()&&(er+="falta logo\n"),""===$("#empresa_autentica").val()&&(er+="falta autentica\n"),""===$("#empresa_lenguaje").val()&&(er+="falta lenguaje\n"),""===$("#empresa_clave").val()&&(er+="falta clave\n"),""===$("#empresa_email").val()&&(er+="falta email\n"),""===$("#empresa_registrsoXpagina").val()&&(er+="falta registrso pagina\n"),""===$("#empresa_diasTrabaja").val()&&(er+="falta dias trabaja\n"),""===$("#empresa_horarioInicio").val()&&(er+="falta horario inicio\n"),""===$("#empresa_horarioTermina").val()&&(er+="falta horario termina\n"),""===$("#empresa_intervaloCalendario").val()&&(er+="falta intervalo calendario\n"),""===$("#empresa_FormatoActa").val()&&(er+="falta formato acta\n"),""==er?a.post("modulos/mod_mm_empresaNew.php?op=a",{op:"a",empresa_id:e.empresa_id,empresa_nombre:e.empresa_nombre,empresa_nit:e.empresa_nit,empresa_web:e.empresa_web,empresa_direccion:e.empresa_direccion,empresa_telefonos:e.empresa_telefonos,empresa_ciudad:e.empresa_ciudad,empresa_logo:e.empresa_logo,empresa_autentica:e.empresa_autentica,empresa_lenguaje:e.empresa_lenguaje,empresa_versionPrd:e.empresa_versionPrd,empresa_versionBd:e.empresa_versionBd,empresa_clave:e.empresa_clave,empresa_email:e.empresa_email,empresa_registrsoXpagina:e.empresa_registrsoXpagina,empresa_diasTrabaja:e.empresa_diasTrabaja,empresa_horarioInicio:e.empresa_horarioInicio,empresa_horarioTermina:e.empresa_horarioTermina,empresa_intervaloCalendario:e.empresa_intervaloCalendario,empresa_FormatoActa:e.empresa_FormatoActa,empresa_cresidencial:e.empresa_cresidencial}).success(function(e){"Ok"===e&&(o(),alert("Registro Actualizado "),$("#idForm").slideToggle())}):alert(er)},e.clearInfo=function(e){console.log("empty"),$("#idForm").slideToggle()}}]);