var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(a,o){a.form_title="Actas de reunión",a.form_btnEdita="Edita",a.form_btnPrint="Imprime",a.form_btnActualiza="Habilita",a.form_btnRegreso="Regresa",a.form_agenda_comiteId="COMITE",a.tituloFormulario="",a.detail={},a.empresa=$("#e").val(),a.parametro="",a.agenda_id=0,a.formato="";var e,t={agenda_comiteId:0};function r(){empresa=a.empresa,o.post("modulos/mod_mm_agendamiento.php?op=rc",{op:"rc",comite_Id:a.agenda_comiteId,empresa:empresa,param:"excluye"}).success(function(o){"No Hay"==o?alert("Este comité no tiene reuniones convocadas"):a.details=o})}e=a.empresa,o.post("modulos/mod_mm_agendamiento.php?op=1",{op:"1",empresa:e}).success(function(o){a.operators1=o}),a.show_form=!0,a.formToggle=function(){$("#idForm").slideToggle(),a.formato.$setPristine(),a.registro=angular.copy(t)},a.updateComite=function(){r()},a.editInfo=function(o){a.agenda_id=o.agenda_id,a.parametro="I",a.tituloFormulario="Habilita "+o.agenda_Descripcion+" para modificarla o enviar nuevamente la citación ",""==o.agenda_observa.trim()&&(a.parametro="A",a.tituloFormulario="Habilita para adelantar la citación  "+o.agenda_Descripcion),a.showEdit=!0},a.anulaRegistro=function(){a.showEdit=!1},a.actualizaRegistro=function(e){agenda=a.agenda_id,param=a.parametro,o.post("modulos/mod_mm_agendamiento.php?op=ha",{op:"ha",agenda_id:agenda,parametro:param}).success(function(a){alert(a),"Ok"===a?(r(),alert("Comité habilitado. ")):alert(a)})},a.printInfo=function(e){agenda=e.agenda_id,empresa=a.empresa,o.post("modulos/mod_mm_agendamiento.php?op=rfa",{op:"rfa",empresa:empresa}).success(function(o){a.formato=o}),confirm("Va a imprimir el acta. Continua ?")&&(location.href="reports/rpt_mm_actas.php?op="+agenda+"&em="+empresa)}}]);