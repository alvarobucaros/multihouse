var app=angular.module("app",[]);app.controller("mainController",["$scope","$http",function(a,s){var t;function r(e){s.post("modulos/mod_mm_temasgrales.php?op=r",{op:"r",empresa:e}).success(function(e){a.details=e,a.configPages()})}a.form_title="Lista de temas generales por comit√©",a.form_btnNuevo="Nuevo registro",a.form_btnEdita="Edita",a.form_btnElimina="Elimina",a.form_btnAnula="Cerrar",a.form_btnActualiza="Actualizar",a.form_titModal="Actualiza lista de registros",a.form_Phbusca="Consulta",a.form_Activo50="Activo",a.form_Activo51="Inactivo",a.form_temasGrales_id="ID",a.form_temasGrales_empresa="EMPRESA",a.form_temasGrales_comiteId="COMITE",a.form_temasGrales_titulo="TITULO",a.form_temasGrales_detalle="DETALLE",a.form_temasGrales_estado="ESTADO",a.form_PhtemasGrales_id="Digite temasgrales_id",a.form_PhtemasGrales_empresa="Digite temasgrales_empresa",a.form_PhtemasGrales_comiteId="Digite temasgrales_comiteid",a.form_PhtemasGrales_titulo="Digite temasgrales_titulo",a.form_PhtemasGrales_detalle="Digite temasgrales_detalle",a.form_PhtemasGrales_estado="Digite temasgrales_estado",a.registro=[],a.empresa=$("#e").val(),a.currentPage=0,a.pageSize=10,a.pages=[],t=a.empresa,s.post("modulos/mod_mm_temasgrales.php?op=0",{op:"0",empresa:t}).success(function(e){a.operators0=e}),r(a.empresa),a.configPages=function(){a.pages.length=0;var e=a.currentPage-4,s=a.currentPage+5;e<1?(e=1,s=Math.ceil(a.details.length/a.pageSize)>10?10:Math.ceil(a.details.length/a.pageSize)):e>=Math.ceil(a.details.length/a.pageSize)-10&&(e=Math.ceil(a.details.length/a.pageSize)-10,s=Math.ceil(a.details.length/a.pageSize)),e<1&&(e=1);for(var t=e;t<=s;t++)a.pages.push({no:t});a.currentPage>=a.pages.length&&(a.currentPage=a.pages.length-1)},a.setPage=function(e){a.currentPage=e-1},a.show_form=!0,a.formToggle=function(){$("#idForm").slideToggle(),$("#idForm").css("display","none")},a.formToggle=function(){e=$("#e").val(),$("#idForm").slideToggle(),a.formato.$setPristine(),a.registro={},a.registro.temasGrales_estado="A",a.registro.temasGrales_id=0,a.registro.temasGrales_empresa=e},a.registro=function(e){s.post("modulos/mod_mm_temasgrales.php?op=a",{op:"a",temasGrales_id:temasGrales_id,temasGrales_empresa:temasGrales_empresa,temasGrales_comiteId:temasGrales_comiteId,temasGrales_titulo:temasGrales_titulo,temasGrales_detalle:temasGrales_detalle,temasGrales_estado:temasGrales_estado}).success(function(e){a.show_form=!0,alert(e),!0===e&&r(a.empresa)})},a.registro={},a.editInfo=function(e){a.registro=e,$("#idForm").slideToggle()},a.deleteInfo=function(e){confirm("Desea borrar el registro con nombre : "+e.temasGrales_titulo+" ?")&&s.post("modulos/mod_mm_temasgrales.php?op=b",{op:"b",temasGrales_id:e.temasGrales_id}).success(function(e){"Ok"===e&&(r(a.empresa),alert("Registro Borrado "))})},a.updateInfo=function(e){er="",""===$("#temasGrales_id").val()&&(er+="falta temasgrales_id\n"),""===$("#temasGrales_empresa").val()&&(er+="falta temasgrales_empresa\n"),""===$("#temasGrales_comiteId").val()&&(er+="falta temasgrales_comiteid\n"),""===$("#temasGrales_titulo").val()&&(er+="falta temasgrales_titulo\n"),""===$("#temasGrales_detalle").val()&&(er+="falta temasgrales_detalle\n"),""===$("#temasGrales_estado").val()&&(er+="falta temasgrales_estado\n"),""==er?s.post("modulos/mod_mm_temasgrales.php?op=a",{op:"a",temasGrales_id:e.temasGrales_id,temasGrales_empresa:e.temasGrales_empresa,temasGrales_comiteId:e.temasGrales_comiteId,temasGrales_titulo:e.temasGrales_titulo,temasGrales_detalle:e.temasGrales_detalle,temasGrales_estado:e.temasGrales_estado}).success(function(e){"Ok"===e?(r(a.empresa),alert("Registro Actualizado "),a.registro={},$("#idForm").slideToggle()):alert(e)}):alert(er)},a.clearInfo=function(e){console.log("empty"),$("#idForm").slideToggle()}}]),app.filter("startFromGrid",function(){return function(e,a){return a=+a,e.slice(a)}});